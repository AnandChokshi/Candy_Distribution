Candy Distribution

Three students sit in a circle while their teacher gives them candy. Each 
student initially has an even number of pieces of candy. When the teacher 
blows a whistle, each student simultaneously gives half of his or her own candy 
to the neighbor on the right.  Any student who ends up with an odd number of 
pieces of candy gets one more piece from the teacher.